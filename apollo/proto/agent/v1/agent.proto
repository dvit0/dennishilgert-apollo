syntax = "proto3";

package apollo.proto.agent.v1;

import "google/protobuf/struct.proto";

option go_package = "github.com/dennishilgert/apollo/internal/pkg/proto/agent/v1;agentpb";

service Agent {
  rpc Invoke(InvokeRequest) returns (InvokeResponse) {}
}

message ContextData {
  string runtime = 1;
  string runtime_version = 2;
  string runtime_handler = 3;
  int32 v_cpu_cores = 4;
  int32 memory_limit = 5;
}

message EventData {
  string uuid = 1;
  string type = 2;
  google.protobuf.Struct payload = 3;
}

message InvokeRequest {
  ContextData context = 1;
  EventData event = 2;
}

message InvokeResponse {
  string event_uuid = 1;
  int32 status = 2;
  string status_message = 3;
  string duration = 4;
  repeated google.protobuf.Struct logs = 5;
  google.protobuf.Struct data = 6;
}